<div class="record" id="loginSite">
    <app-navbar-doctor></app-navbar-doctor>
    <app-navbar-patient></app-navbar-patient>
    <div class="container-fluid">
        <div class="shadow p-3 bg-white record__body">
            <div class="record__noSelectedPatient" id="noSelectedPatient">
                <h2>Leider ist kein Patient ausgew채hlt</h2>
                <p>Um einen Patienten auszuw채hlen bitte <a routerLink="/doctor/patients/list">hier</a> klicken</p>
            </div>

            <div class="record__selectedPatient" id="selectedPatient">
                <div class="record__selectedPatient--record" id="information">
                    <h2>Akt von {{selectedPatient.last_name | uppercase}} {{selectedPatient.first_name}}:</h2>
                    <hr class="m-4">
                    <div class="row">
                        <div class="col-12 col-md-4 col-lg-3 col-xl-2">
                            <span class="record__selectedPatient--label">SV-Nummer:</span><br>
                            <span>{{selectedPatient.sv}}</span>
                        </div>
                        <div class="col-12 col-md-4 col-lg-3 col-xl-2">
                            <span class="record__selectedPatient--label">Alter:</span><br>
                            <span>{{age}}</span>
                        </div>
                        <div class="col-12 col-md-4 col-lg-3 col-xl-2">
                            <span class="record__selectedPatient--label">Geschlecht:</span><br>
                            <span>{{selectedPatient.gender}}</span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 col-md-4 col-lg-3 col-xl-2">
                            <span class="record__selectedPatient--label">Registriert seit:</span><br>
                            <span>{{selectedPatient.registered | date:'dd.MM.yyyy'}}</span>
                        </div>
                        <div class="col-12 col-md-4 col-lg-3 col-xl-2">
                            <span class="record__selectedPatient--label">Letzter Besuch:</span><br>
                            <span>{{selectedPatient.last_visit | date:'dd.MM.yyyy'}}</span>
                        </div>
                        <div class="co-12 col-sm-4 col-md-4 col-lg-3 col-xl-2">
                            <input type="button" value="Patient war hier"
                                   class="btn btn-danger record__selectedPatient--btn"
                                   (click)="onHere(selectedPatient)">
                        </div>
                    </div>
                </div>
                <div class="record__selectedPatient--meds">
                    <h3>Medikation:</h3>
                    <h4>Neues Medikation hinzuf체gen:</h4>
                    <form class="form-inline" (ngSubmit)="onSend(newMedForm.value)" #newMedForm="ngForm"
                          ngNativeValidate>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <label class="input-group-text" for="medikament">Medikament:</label>
                                <input type="text" id="medikament" name="medikament"
                                       class="record__selectedPatient--newMed"
                                       [(ngModel)]="newMedForm.medikament" required>
                            </div>
                            <div class="input-group-prepend">
                                <label class="input-group-text record__selectedPatient--newMedLabel" for="intervall">
                                    Intervall:</label>
                                <input type="text" id="intervall" name="intervall"
                                       class="record__selectedPatient--newMed"
                                       [(ngModel)]="newMedForm.intervall" pattern='[0-9][-][0-9][-][0-9][-][0-9]'
                                       required>
                            </div>
                            <button type="submit" class="btn btn-danger record__selectedPatient--newMedBtn">
                                Speichern
                            </button>
                        </div>
                    </form>
                    <div class="record__selectedPatient--medList">
                        <h4>Derzeitige Medikation:</h4>
                        <div id="currentMed">
                            <ul>
                                <li *ngFor="let currentMed of currentMeds">
                                    <div id="{{currentMed.medication}}-form" style="Display: none;">
                                        <form ngNativeValidat>
                                            <input type="text" value="{{currentMed.medication}}" class="form" required>
                                            <span> </span>
                                            <input type="text" value="{{currentMed.intervall}}" class="form" required>
                                            <fa class="record__selectedPatient--edit" name="check"
                                                (click)="onSave(currentMed)"></fa>
                                        </form>
                                    </div>
                                    <div id="{{currentMed.medication}}">
                                        <span>{{currentMed.medication}}</span>
                                        <span> {{currentMed.intervall}}seit {{currentMed.timestampFrom | date:'dd.MM.yyyy'}}</span>
                                        <fa class="record__selectedPatient--edit" name="pencil"
                                            (click)="onEdit(currentMed)"></fa>
                                        <fa class="record__selectedPatient--delete" name="trash"
                                            (click)="onDelete(currentMed)"></fa>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="record__selectedPatient--medList">
                        <h4>Bereits probierte Medikamente:</h4>
                        <div id="usedMed">
                            <ul>
                                <li *ngFor="let usedMed of usedMeds">
                  <span>{{usedMed.medication}} von {{usedMed.timestampFrom | date:'dd.MM.yyyy'}} bis
                    {{usedMed.timestampTo | date:'dd.MM.yyyy'}}</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="record__selectedPatient--chart">
                    <h3>Blutdruckwerte des Patienten:</h3>
                    <highcharts-chart
                            [Highcharts]="Highcharts"
                            [options]="chartOptions"
                            class="record__selectedPatient--valueChart"
                    ></highcharts-chart>
                </div>
            </div>

            <div class="record__newPatient" id="newPatient">
                <h2>Neuer Patient:</h2>
                <form (ngSubmit)="onSavePatient(newPatientForm.value)" #newPatientForm="ngForm" ngNativeValidate>
                    <div class="form-row">
                        <div class="col-12 col-md-6 col-lg-3">
                            <label for="firstName" class="record__newPatient--label">Vorname:</label>
                            <input id="firstName" type="text" name="firstName" class="form-control"
                                   [(ngModel)]="newPatientForm.firstName" pattern="[A-Za-z]" required>
                        </div>
                        <div class="col-12 col-md-6 col-lg-3">
                            <label for="lastName" class="record__newPatient--label">Nachname: </label>
                            <input id="lastName" type="text" name="lastName" class="form-control"
                                   [(ngModel)]="newPatientForm.lastName" pattern="[A-Za-z]" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="col-12 col-md-9 col-lg-4">
                            <label for="sv" class="record__newPatient--label">SV-Nummer:</label>
                            <input id="sv" type="text" name="sv" class="form-control"
                                   [(ngModel)]="newPatientForm.sv" pattern='[0-9]{10}' required>
                        </div>
                        <div class="col-12 col-md-3 col-lg-2">
                            <label for="gender" class="record__newPatient--label">Geschlecht:</label>
                            <select id="gender" name="gender" class="form-control"
                                    [(ngModel)]="newPatientForm.gender" required>
                                <option value="m">m채nnlich</option>
                                <option value="w">weiblich</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="col-12 col-md-9 col-lg-4">
                            <label for="email" class="record__newPatient--label">E-Mail Adresse:</label>
                            <input id="email" type="email" name="email" class="form-control"
                                   [(ngModel)]="newPatientForm.email" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="col-12 col-lg-6">
                            <button type="submit" class="btn btn-danger record__newPatient--btn">
                                Akt anlegen
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<app-no-access></app-no-access>
